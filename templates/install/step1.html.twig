<h3>{{ __("Checking of the compatibility of your environment with the execution of GLPI") }}</h3>

<table class="table tab_check">
   <thead>
      <tr>
         <th>{{ __('Test done') }}</th>
         <th>{{ __('Results') }}</th>
      </tr>
   </thead>
   <tbody>
      {% for requirement in requirements %}
         {% if not requirement.isOutOfContext() %}
            <tr class="tab_bg_1">
               <td class="b left">{{ requirement.getTitle() }}</td>
               <td class="{{ requirement.isMissing() and not requirement.isOptional() ? 'red' : '' }}">
                  <i class="fas {{ requirement.isValidated() ? 'fa-check' : (requirement.isOptional() ? 'fa-exclamation-triangle' : 'fa-times') }}"
                     title="{{ requirement.getValidationMessages()|join(' ') }}"></i>
                  {% if not requirement.isValidated() %}
                     {% for msg in requirement.getValidationMessages() %}
                        {{ msg }}<br />
                     {% endfor %}
                  {% endif %}
               </td>
            </tr>
         {% endif %}
      {% endfor %}
   </tbody>
</table>

{% set common_hiddens %}
   <input type="hidden" name="language" value="{{ session('glpilanguage') }}">
   <input type="hidden" name="update" value="{{ update }}">
   <input type="hidden" name="_glpi_csrf_token" value="{{ csrf_token() }}">
{% endset %}

{% set continue_form %}
   <form action="install.php" method="post" class="d-inline">
      <button type="submit" name="submit" class="btn btn-primary">
         {{ __("Continue") }}
         <i class="fas fa-chevron-right ms-1"></i>
      </button>

      <input type="hidden" name="install" value="Etape_1">
      {{ common_hiddens }}
   </form>
{% endset %}

{% set retry_form %}
   <form action="install.php" method="post" class="d-inline">
      <button type="submit" name="submit" class="btn btn-warning">
         {{ __("Try again") }}
         <i class="fas fa-redo ms-1"></i>
      </button>

      <input type="hidden" name="install" value="Etape_0">
      {{ common_hiddens }}
   </form>
{% endset %}

{% if requirements.hasMissingMandatoryRequirements() %}
   <h3>{{ __('Do you want to continue?') }}</h3>
   {{ retry_form }}
{% elseif requirements.hasMissingOptionalRequirements() %}
   <h3>{{ __('Do you want to continue?') }}</h3>
   {{ continue_form }}
   {{ retry_form }}
{% else %}
   {{ continue_form }}
{% endif %}
