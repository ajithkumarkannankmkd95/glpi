{% set rand = random() %}

<div class="dropdown dropstart">
   <button class="dropdown-item dropdown-toggle" type="button" data-bs-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false">
      <i class="fas fa-user-check"></i>
      {{ (session('glpiactiveprofile')['name'] ?? '')|verbatim_value }}
   </button>
   <div class="dropdown-menu" data-bs-popper="none">
      <span class="dropdown-header">{{ __('Profiles') }}</span>
      {% for profile_id, profile in session('glpiprofiles') %}
      <a class="dropdown-item {{ profile_id == (session('glpiactiveprofile')['id'] ?? 0) ? 'active' : '' }}"
         href="{{ index_path() }}?newprofile={{ profile_id }}">
         <i class="fas fa-user-check"></i>{{ profile['name']|verbatim_value }}
      </a>
      {% endfor %}
   </div>
</div>

<div class="dropdown dropstart">
   <a href="#" class="dropdown-item dropdown-toggle show_entity_modal" data-bs-toggle="dropdown" data-bs-auto-close="outside">
      <i class="fa-fw fas fa-layer-group"></i>
      {{ session('glpiactive_entity_name')|verbatim_value|u.truncate(35, '...') }}
   </a>
   <div class="dropdown-menu p-3" data-bs-popper="none">
      <h3>{{ __('Select the desired entity') }}</h3>
      <div id="entity_list_{{ rand }}"></div>
   </div>
</div>

<script type="text/javascript">
$(function() {
   $("#entity_list_{{ rand }}").load('{{ path("/ajax/entitytree.php") }}')
});
</script>
